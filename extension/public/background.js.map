{"version":3,"file":"background.js","mappings":"AAEAA,OAAOC,QAAQC,UAAUC,YAAY,SAACC,EAASC,EAAQC,GACrD,GAAuB,oBAAnBF,EAAQG,OAA8B,CAExC,IAAMC,EAAOJ,EAAQI,KAgBrB,OAfAC,MAAM,sCAADC,OAAuCC,mBAAmBH,KAC5DI,KAAK,SAACC,GACL,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAM,aAElB,OAAOF,EAASG,MAClB,GACCJ,KAAK,SAACK,GACLX,EAAa,CAAEY,SAAS,EAAMD,KAAAA,GAChC,GAAE,MACK,SAACE,GACNC,QAAQD,MAAM,eAAgBA,GAC9Bb,EAAa,CAAEY,SAAS,EAAOC,MAAOA,EAAMf,SAC9C,IAEK,CACT,CAEA,GAAuB,cAAnBA,EAAQG,OAYV,OAVAP,OAAOO,OACJc,YACAT,KAAK,WACJN,EAAa,CAAEY,SAAS,GAC1B,GAAE,MACK,SAACC,GACNC,QAAQD,MAAM,wBAAyBA,GACvCb,EAAa,CAAEY,SAAS,GAC1B,IAEK,CAEX","sources":["webpack://hanyomi-extension/./src/background.js"],"sourcesContent":["// Background service worker\r\n\r\nchrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\r\n  if (message.action === \"fetchDictionary\") {\r\n    // APIリクエストをバックグラウンドから実行\r\n    const word = message.word;\r\n    fetch(`http://localhost:3000/api/dic?word=${encodeURIComponent(word)}`)\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(\"API error\");\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        sendResponse({ success: true, data });\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Fetch error:\", error);\r\n        sendResponse({ success: false, error: error.message });\r\n      });\r\n\r\n    return true; // 非同期応答を使用\r\n  }\r\n\r\n  if (message.action === \"openPopup\") {\r\n    // ポップアップを開く処理\r\n    chrome.action\r\n      .openPopup()\r\n      .then(() => {\r\n        sendResponse({ success: true });\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Failed to open popup:\", error);\r\n        sendResponse({ success: false });\r\n      });\r\n\r\n    return true;\r\n  }\r\n});\r\n"],"names":["chrome","runtime","onMessage","addListener","message","sender","sendResponse","action","word","fetch","concat","encodeURIComponent","then","response","ok","Error","json","data","success","error","console","openPopup"],"ignoreList":[],"sourceRoot":""}