chrome.runtime.onMessage.addListener(function(e,r,o){if("fetchDictionary"===e.action){var n=e.word;return fetch("http://localhost:3000/api/dic?word=".concat(encodeURIComponent(n))).then(function(e){if(!e.ok)throw new Error("API error");return e.json()}).then(function(e){o({success:!0,data:e})}).catch(function(e){console.error("Fetch error:",e),o({success:!1,error:e.message})}),!0}if("fetchExamples"===e.action){var c=e.word;return fetch("http://localhost:3000/api/examples?word=".concat(encodeURIComponent(c))).then(function(e){if(!e.ok)throw new Error("API error");return e.json()}).then(function(e){o({success:!0,data:e})}).catch(function(e){console.error("Fetch error:",e),o({success:!1,error:e.message})}),!0}if("openPopup"===e.action)return chrome.action.openPopup().then(function(){o({success:!0})}).catch(function(e){console.error("Failed to open popup:",e),o({success:!1})}),!0;if("addToAnki"===e.action){var t=e.deckName,s=e.modelName,a=e.fields,i=e.tags;if(!t||!s||!a)return o({success:!1,error:"Missing required fields: deckName, modelName, or fields"}),!0;var d={deckName:t,modelName:s,fields:a,tags:i};return fetch("http://localhost:3000/api/anki/add-card",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then(function(e){if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()}).then(function(e){console.log("Anki API response:",e),e.error?o({success:!1,error:e.error}):o({success:!0,cardId:e.cardId})}).catch(function(e){console.error("Add to Anki error:",e),o({success:!1,error:e.message})}),!0}});
//# sourceMappingURL=background.js.map